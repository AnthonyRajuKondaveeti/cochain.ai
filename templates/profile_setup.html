{% extends "base.html" %} {% block title %}Complete Your Profile - CoChain.ai{%
endblock %} {% block content %}
<div class="max-w-4xl mx-auto py-8">
  <!-- Header -->
  <div class="text-center mb-8">
    <h1 class="text-4xl font-bold text-gray-900 mb-2">
      <i class="fas fa-user-circle text-blue-500 mr-2"></i>
      Complete Your Profile
    </h1>
    <p class="text-xl text-gray-600">
      Help us personalize your learning journey
    </p>

    <!-- Progress Steps -->
    <div class="flex justify-center items-center mt-6 space-x-4">
      <div class="flex items-center">
        <div
          class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center"
        >
          <i class="fas fa-check"></i>
        </div>
        <span class="ml-2 text-sm text-gray-600">Account Created</span>
      </div>
      <div class="w-16 h-1 bg-blue-500"></div>
      <div class="flex items-center">
        <div
          class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center"
        >
          2
        </div>
        <span class="ml-2 text-sm font-semibold text-blue-600"
          >Profile Setup</span
        >
      </div>
      <div class="w-16 h-1 bg-gray-300"></div>
      <div class="flex items-center">
        <div
          class="bg-gray-300 text-white rounded-full w-8 h-8 flex items-center justify-center"
        >
          3
        </div>
        <span class="ml-2 text-sm text-gray-400">Get Recommendations</span>
      </div>
    </div>
  </div>

  <!-- Profile Form -->
  <div class="bg-white rounded-xl shadow-lg p-8">
    <form
      id="profile-form"
      method="POST"
      action="{{ url_for('profile_setup') }}"
    >
      <!-- Education Background Section -->
      <div class="mb-8">
        <h3 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
          <i class="fas fa-graduation-cap text-blue-500 mr-2"></i>
          Education Background
        </h3>

        <div class="grid md:grid-cols-2 gap-6">
          <!-- Education Level -->
          <div>
            <label class="block text-gray-700 font-semibold mb-2">
              Education Level *
            </label>
            <select
              name="education_level"
              required
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="">Select level...</option>
              <option value="high_school">High School</option>
              <option value="undergraduate">Undergraduate</option>
              <option value="graduate">Graduate/Masters</option>
              <option value="professional">Professional/PhD</option>
              <option value="self_taught">Self-Taught</option>
            </select>
          </div>

          <!-- Current Year -->
          <div>
            <label class="block text-gray-700 font-semibold mb-2">
              Current Year
            </label>
            <select
              name="current_year"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="">Select year...</option>
              <option value="freshman">Freshman</option>
              <option value="sophomore">Sophomore</option>
              <option value="junior">Junior</option>
              <option value="senior">Senior</option>
              <option value="graduated">Graduated</option>
              <option value="other">Other</option>
            </select>
          </div>
        </div>

        <!-- Field of Study -->
        <div class="mt-4">
          <label class="block text-gray-700 font-semibold mb-2">
            Field of Study
          </label>
          <input
            type="text"
            name="field_of_study"
            placeholder="e.g., Computer Science, Engineering, Business..."
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
          />
        </div>

        <!-- Bio / Career Aspirations -->
        <div class="mt-4">
          <label class="block text-gray-700 font-semibold mb-2">
            Bio / Career Aspirations *
          </label>
          <textarea
            name="bio"
            rows="4"
            placeholder="Tell us about your career goals, interests, and what you hope to achieve in technology..."
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-vertical"
            required
          ></textarea>
          <p class="text-sm text-gray-500 mt-1">
            This helps us recommend projects that align with your goals (minimum
            50 characters)
          </p>
        </div>
      </div>

      <!-- Skill Level Section -->
      <div class="mb-8">
        <h3 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
          <i class="fas fa-signal text-purple-500 mr-2"></i>
          Your Skill Level *
        </h3>

        <div class="grid md:grid-cols-4 gap-4">
          <label class="cursor-pointer">
            <input
              type="radio"
              name="overall_skill_level"
              value="beginner"
              class="peer hidden"
              required
            />
            <div
              class="border-2 border-gray-300 rounded-lg p-4 text-center peer-checked:border-green-500 peer-checked:bg-green-50 hover:border-green-300 transition"
            >
              <i class="fas fa-seedling text-3xl text-green-500 mb-2"></i>
              <div class="font-semibold">Beginner</div>
              <div class="text-xs text-gray-600">Just starting out</div>
            </div>
          </label>

          <label class="cursor-pointer">
            <input
              type="radio"
              name="overall_skill_level"
              value="intermediate"
              class="peer hidden"
              checked
            />
            <div
              class="border-2 border-gray-300 rounded-lg p-4 text-center peer-checked:border-blue-500 peer-checked:bg-blue-50 hover:border-blue-300 transition"
            >
              <i class="fas fa-chart-line text-3xl text-blue-500 mb-2"></i>
              <div class="font-semibold">Intermediate</div>
              <div class="text-xs text-gray-600">Some experience</div>
            </div>
          </label>

          <label class="cursor-pointer">
            <input
              type="radio"
              name="overall_skill_level"
              value="advanced"
              class="peer hidden"
            />
            <div
              class="border-2 border-gray-300 rounded-lg p-4 text-center peer-checked:border-orange-500 peer-checked:bg-orange-50 hover:border-orange-300 transition"
            >
              <i class="fas fa-rocket text-3xl text-orange-500 mb-2"></i>
              <div class="font-semibold">Advanced</div>
              <div class="text-xs text-gray-600">Very experienced</div>
            </div>
          </label>

          <label class="cursor-pointer">
            <input
              type="radio"
              name="overall_skill_level"
              value="expert"
              class="peer hidden"
            />
            <div
              class="border-2 border-gray-300 rounded-lg p-4 text-center peer-checked:border-red-500 peer-checked:bg-red-50 hover:border-red-300 transition"
            >
              <i class="fas fa-trophy text-3xl text-red-500 mb-2"></i>
              <div class="font-semibold">Expert</div>
              <div class="text-xs text-gray-600">Professional level</div>
            </div>
          </label>
        </div>
      </div>

      <!-- Areas of Interest Section -->
      <div class="mb-8">
        <h3 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
          <i class="fas fa-heart text-red-500 mr-2"></i>
          Areas of Interest * (Select at least 2)
        </h3>

        <div class="grid md:grid-cols-3 gap-4">
          {% for interest in interest_areas %}
          <label class="cursor-pointer">
            <input
              type="checkbox"
              name="areas_of_interest"
              value="{{ interest.name }}"
              class="peer hidden interest-checkbox"
            />
            <div
              class="border-2 border-gray-300 rounded-lg p-4 peer-checked:border-blue-500 peer-checked:bg-blue-50 hover:border-blue-300 transition"
            >
              <i
                class="fas {{ interest.icon }} text-2xl text-blue-500 mb-2"
              ></i>
              <div class="font-semibold capitalize">
                {{ interest.name.replace('_', ' ') }}
              </div>
              <div class="text-xs text-gray-600 mt-1">
                {{ interest.description[:40] }}...
              </div>
            </div>
          </label>
          {% endfor %}
        </div>
        <p class="text-sm text-gray-500 mt-2" id="interest-count">
          Selected: 0
        </p>
      </div>

      <!-- Programming Languages -->
      <div class="mb-8">
        <h3 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
          <i class="fas fa-code text-green-500 mr-2"></i>
          Programming Languages You Know
        </h3>

        <div class="grid md:grid-cols-4 gap-3">
          {% for lang in ['Python', 'JavaScript', 'Java', 'C++', 'C#', 'Ruby',
          'Go', 'Swift', 'Kotlin', 'PHP', 'TypeScript', 'Rust'] %}
          <label class="cursor-pointer">
            <input
              type="checkbox"
              name="programming_languages"
              value="{{ lang }}"
              class="peer hidden"
            />
            <div
              class="border-2 border-gray-300 rounded-lg p-3 text-center peer-checked:border-green-500 peer-checked:bg-green-50 hover:border-green-300 transition"
            >
              <span class="font-semibold">{{ lang }}</span>
            </div>
          </label>
          {% endfor %}
        </div>
      </div>

      <!-- Frameworks -->
      <div class="mb-8">
        <h3 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
          <i class="fas fa-tools text-orange-500 mr-2"></i>
          Frameworks & Libraries You Know
        </h3>

        <div class="grid md:grid-cols-4 gap-3">
          {% for framework in ['React', 'Vue.js', 'Angular', 'Node.js',
          'Django', 'Flask', 'Spring', 'Express', 'Laravel', 'Rails',
          'TensorFlow', 'PyTorch'] %}
          <label class="cursor-pointer">
            <input
              type="checkbox"
              name="frameworks_known"
              value="{{ framework }}"
              class="peer hidden"
            />
            <div
              class="border-2 border-gray-300 rounded-lg p-3 text-center peer-checked:border-orange-500 peer-checked:bg-orange-50 hover:border-orange-300 transition"
            >
              <span class="font-semibold">{{ framework }}</span>
            </div>
          </label>
          {% endfor %}
        </div>
      </div>

      <!-- Learning Goals -->
      <div class="mb-8">
        <h3 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
          <i class="fas fa-bullseye text-yellow-500 mr-2"></i>
          Your Learning Goals
        </h3>

        <textarea
          name="learning_goals"
          rows="4"
          placeholder="What do you want to achieve? e.g., Build a portfolio, learn new technologies, contribute to open source, get job-ready..."
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
        ></textarea>
      </div>

      <!-- Preferences -->
      <div class="mb-8">
        <h3 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
          <i class="fas fa-sliders-h text-indigo-500 mr-2"></i>
          Your Preferences
        </h3>

        <div class="grid md:grid-cols-3 gap-6">
          <!-- Time Commitment -->
          <div>
            <label class="block text-gray-700 font-semibold mb-2">
              Time Commitment
            </label>
            <select
              name="time_commitment"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="part_time">Part-time (few hours/week)</option>
              <option value="full_time">Full-time (40+ hours/week)</option>
              <option value="weekend_warrior">Weekends only</option>
            </select>
          </div>

          <!-- Project Size -->
          <div>
            <label class="block text-gray-700 font-semibold mb-2">
              Preferred Project Size
            </label>
            <select
              name="preferred_project_size"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="small">Small (1-2 weeks)</option>
              <option value="medium" selected>Medium (1-2 months)</option>
              <option value="large">Large (3+ months)</option>
            </select>
          </div>

          <!-- Team Preference -->
          <div>
            <label class="block text-gray-700 font-semibold mb-2">
              Team Preference
            </label>
            <select
              name="team_preference"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="solo">Solo projects</option>
              <option value="small_team">Small team (2-3)</option>
              <option value="large_team">Large team (4+)</option>
              <option value="any" selected>No preference</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="flex justify-between items-center">
        <button
          type="button"
          onclick="window.location.href='{{ url_for('dashboard') }}'"
          class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition"
        >
          Skip for Now
        </button>

        <button
          type="submit"
          class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:opacity-90 transition transform hover:scale-105 shadow-lg"
        >
          <i class="fas fa-check-circle mr-2"></i>
          Complete Profile & Get Recommendations
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script>
  // Track interest selections
  document.querySelectorAll(".interest-checkbox").forEach((checkbox) => {
    checkbox.addEventListener("change", function () {
      const count = document.querySelectorAll(
        ".interest-checkbox:checked"
      ).length;
      document.getElementById(
        "interest-count"
      ).textContent = `Selected: ${count}`;
    });
  });

  // Form submission
  document
    .getElementById("profile-form")
    .addEventListener("submit", function (e) {
      e.preventDefault();

      // Validate interests
      const interests = document.querySelectorAll(".interest-checkbox:checked");
      if (interests.length < 2) {
        showToast("Please select at least 2 areas of interest", "warning");
        return;
      }

      showLoading();

      const formData = new FormData(this);

      // Convert FormData to JSON
      const data = {
        education_level: formData.get("education_level"),
        current_year: formData.get("current_year"),
        field_of_study: formData.get("field_of_study"),
        bio: formData.get("bio"),
        overall_skill_level: formData.get("overall_skill_level"),
        areas_of_interest: formData.getAll("areas_of_interest"),
        programming_languages: formData.getAll("programming_languages"),
        frameworks_known: formData.getAll("frameworks_known"),
        learning_goals: formData.get("learning_goals"),
        time_commitment: formData.get("time_commitment"),
        preferred_project_size: formData.get("preferred_project_size"),
        team_preference: formData.get("team_preference"),
      };

      fetch('{{ url_for("profile_setup") }}', {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(data),
      })
        .then((response) => response.json())
        .then((data) => {
          hideLoading();
          if (data.success) {
            showToast(
              "Profile completed! Loading your personalized recommendations...",
              "success"
            );
            setTimeout(() => {
              window.location.href = '{{ url_for("dashboard") }}';
            }, 1500);
          } else {
            showToast(data.error || "Failed to update profile", "error");
          }
        })
        .catch((error) => {
          hideLoading();
          showToast("Error: " + error.message, "error");
        });
    });
</script>
{% endblock %}
